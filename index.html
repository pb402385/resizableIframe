<!DOCTYPE html>
<html>

    <head>
        <title>Iframe Redimentionnable</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="index.css">

        <script>
            function showBtn() {
                let url = document.getElementById('inputURL').value;
                let deleteBTN = document.getElementById('btnDelete');
                let sendBTN = document.getElementById('btnSend');
                if( url.length > 0 ){
                    deleteBTN.disabled = false;
                    sendBTN.disabled = false;
                } else {
                    deleteBTN.disabled = true;
                    sendBTN.disabled = true;
                }
            }

            function resetIframe(){
                let url = document.getElementById('inputURL');
                url.value = '';
                let deleteBTN = document.getElementById('btnDelete');
                let sendBTN = document.getElementById('btnSend');
                deleteBTN.disabled = true;
                sendBTN.disabled = true;

                createIframe('about:blank');
            }

            function loadIframe(){
                let url = document.getElementById('inputURL').value;
                createIframe(url);
            }

            function createIframe(src){
                debugger;
                let iframe_div = document.getElementById('containerIframe');
                let  oldIframe = document.getElementById('id_Iframe');
                oldIframe.setAttribute('src',src);
                oldIframe.style.webkitTransform = 'scale(1)';

                let url_info = document.getElementById('url_info');
                url_info.innerHTML = '<span>URL:</span> ' + src;

                let iframe_w = document.getElementById('iframe_w');
                iframe_w.innerHTML = '<span>LARGEUR:</span> ' + oldIframe.clientWidth;

                let iframe_h = document.getElementById('iframe_h');
                iframe_h.innerHTML = '<span>HAUTEUR:</span> ' + oldIframe.clientHeight;
            }
        </script>
    </head>

    <body>

        <div id="menu_container">

            <div id="menu_left">
                <h1>Iframe Redimentionnable</h1>

                <div class="search-wrapper cf">
                    <button id="btnDelete" class="delete" onclick="resetIframe();" disabled>X</button>
                    <input id="inputURL" type="text" placeholder="Url de l'iframe" required style="box-shadow: none" oninput="showBtn();">
                    <button id="btnSend" class="send" onclick="loadIframe();" disabled>Charger</button>
                </div>
            </div>

            <div id="menu_right">
                <div id="url_info">
                    <span>URL:</span> about:blank
                </div>
                <div id="iframe_w">
                    <span>LARGEUR:</span> NULL
                </div>
                <div id="iframe_h">
                    <span>HAUTEUR:</span> NULL
                </div>
            </div>
        </div>

        <!-- iframes need a wrapper to make them resizable -->
        <div id="containerIframe" class="resizable">
            <iframe onload="showStats();" id="id_Iframe" title="Iframe Redimentionnable" src="about:blank" sandbox="allow-same-origin allow-top-navigation allow-scripts" referrerpolicy="unsafe-url" allowpaymentrequest>Loading...</iframe>
        </div>


        <script>
            function showStats(){
                let  oldIframe = document.getElementById('id_Iframe');

                let iframe_w = document.getElementById('iframe_w');
                iframe_w.innerHTML = '<span>LARGEUR:</span> ' + oldIframe.clientWidth;

                let iframe_h = document.getElementById('iframe_h');
                iframe_h.innerHTML = '<span>HAUTEUR:</span> ' + oldIframe.clientHeight;

                setTimeout(function(){ showStats(); }, 100);
            }
        </script>

    </body>

</html>